<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prepositions Quiz</title>
    <link rel="stylesheet" href="preposition1.css">
</head>
<body>
    <h1>Prepositions Exercise</h1>
    <p class="instructions">Drag and drop the correct preposition.</p>

    <!-- Floating Draggable Items -->
    <div class="drag-container">
        <div class="draggable" draggable="true" id="with">with</div>
        <div class="draggable" draggable="true" id="to">to</div>
        <div class="draggable" draggable="true" id="at">at</div>
        <div class="draggable" draggable="true" id="by">by</div>
        <div class="draggable" draggable="true" id="in">in</div>
        <div class="draggable" draggable="true" id="from">from</div>
        <div class="draggable" draggable="true" id="for">for</div>
        <div class="draggable" draggable="true" id="on">on</div>
    </div>

    <!-- Questions -->
    <div class="question-container">
        <div class="sentence" data-hint="Use 'in' for enclosed spaces.">
            1. She is <span class="word">____</span> the kitchen cooking dinner.
        </div>
        <div class="sentence" data-hint="Use 'on' for surfaces.">
            2. The book is <span class="word">____</span> the table.
        </div>
        <div class="sentence" data-hint="Use 'at' for specific points or locations.">
            3. We will meet <span class="word">____</span> the bus stop.
        </div>
        <div class="sentence" data-hint="Use 'by' to indicate proximity or means.">
            4. The house is <span class="word">____</span> the river.
        </div>
        <div class="sentence" data-hint="Use 'with' to indicate accompaniment.">
            5. He went to the party <span class="word">____</span> his friends.
        </div>
        <div class="sentence" data-hint="Use 'for' to indicate purpose.">
            6. This gift is <span class="word">____</span> you.
        </div>
        <div class="sentence" data-hint="Use 'to' to indicate direction.">
            7. She is going <span class="word">____</span> the park.
        </div>
        <div class="sentence" data-hint="Use 'from' to indicate origin.">
            8. I received a letter <span class="word">____</span> my cousin.
        </div>
        <div class="sentence" data-hint="Use 'in' for months and years.">
            9. My birthday is <span class="word">____</span> July.
        </div>
        <div class="sentence" data-hint="Use 'at' for events.">
            10. I will see you <span class="word">____</span> the concert.
        </div>
        <div class="sentence" data-hint="Use 'at' for specific times.">
            11. The train arrives <span class="word">____</span> 5 PM.
        </div>
        <div class="sentence" data-hint="Use 'for' to indicate duration.">
            12. We have been waiting <span class="word">____</span> two hours.
        </div>
        <div class="sentence" data-hint="Use 'with' to indicate using something.">
            13. She cut the paper <span class="word">____</span> scissors.
        </div>
          <div class="sentence" data-hint="Use 'from' to indicate separation.">
            14. She moved away <span class="word">____</span> her hometown.
        </div>
         <div class="sentence" data-hint="Use 'by' to indicate a deadline.">
            15. Please submit your assignment <span class="word">____</span> Friday.
        </div>
        <div class="sentence" data-hint="Use 'in' for parts of the day.">
            16. We usually go for a walk <span class="word">____</span> the evening.
        </div>
        <div class="sentence" data-hint="Use 'on' for dates.">
            17. The event is <span class="word">____</span> the 15th of June.
        </div>
        <div class="sentence" data-hint="Use 'to' to indicate a recipient.">
            18. He gave the book <span class="word">____</span> his sister.
        </div>
        <div class="sentence" data-hint="Use 'on' for days of the week.">
            19. We have a meeting <span class="word">____</span> Monday.
        </div>
        <div class="sentence" data-hint="Use 'by' to indicate authorship.">
            20. This book was written <span class="word">____</span> J.K. Rowling.
        </div>
    </div>

    <!-- Results and Reset -->
    <div class="result">
        <p>Your Score: <span id="score">0</span> / 20</p>
        <button onclick="resetQuiz()">Reset Quiz</button>
    </div>

    <footer class="footer">
        <p>Game developed by <strong>Nabaraj Dhungana</strong></p>
    </footer>

    <!-- Sound Files -->
    <audio id="correct-sound" src="../sounds/right.wav"></audio>
    <audio id="wrong-sound" src="../sounds/wrong.wav"></audio>

    <script>
        // Correct answers for the new quiz
        const correctAnswers = ["in", "on", "at", "by", "with", "for", "to", "from", "in", "at", "at", "for", "with", "from", "by", "in", "on", "to", "on", "by"];

        // Select the necessary elements
        const blanks = document.querySelectorAll('.word');
        const draggables = document.querySelectorAll('.draggable');
        const scoreElement = document.getElementById('score');
        let score = 0;

        // Load sound files from HTML
        const correctSound = document.getElementById('correct-sound');
        const wrongSound = document.getElementById('wrong-sound');

        // Set up drag-and-drop events
        draggables.forEach(draggable => {
            draggable.addEventListener('dragstart', handleDragStart);
            draggable.addEventListener('dragend', handleDragEnd);
        });

        blanks.forEach((blank, index) => {
            blank.addEventListener('dragover', handleDragOver);
            blank.addEventListener('drop', (event) => handleDrop(event, index));
        });

        let draggedItem = null;

        // Drag Start
        function handleDragStart(event) {
            draggedItem = event.target;
            setTimeout(() => {
                event.target.style.display = "none";
            }, 0);
        }

        // Drag End
        function handleDragEnd(event) {
            setTimeout(() => {
                draggedItem.style.display = "inline-block";
                draggedItem = null;
            }, 0);
        }

        // Allow drop
        function handleDragOver(event) {
            event.preventDefault();
        }

        // Handle Drop
        function handleDrop(event, index) {
            event.preventDefault();
            const blank = event.target;
            const draggedText = draggedItem.textContent;

            if (blank.textContent === "____") {
                blank.textContent = draggedText;

                if (draggedText === correctAnswers[index]) {
                    blank.style.color = "green";
                    correctSound.play(); // Play correct sound
                    score++;
                } else {
                    blank.style.color = "red";
                    wrongSound.play(); // Play wrong sound
                    showHint(blank.parentElement.dataset.hint, blank);
                }

                scoreElement.textContent = score;
            }
        }

        // Show Hint
        function showHint(hintText, element) {
            const hint = document.createElement('div');
            hint.className = 'hint';
            hint.textContent = hintText;
            element.appendChild(hint);

            setTimeout(() => {
                element.removeChild(hint);
            }, 10000);
        }

        // Reset Quiz
        function resetQuiz() {
            blanks.forEach(blank => {
                blank.textContent = "____";
                blank.style.color = "black";
            });

            draggables.forEach(draggable => {
                draggable.style.display = "inline-block";
            });

            score = 0;
            scoreElement.textContent = score;
        }
    </script>
</body>
</html>